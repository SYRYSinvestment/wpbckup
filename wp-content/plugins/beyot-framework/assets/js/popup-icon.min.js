(function(i){"use strict";var e={htmlTag:{wrapper:".popup-icon-wrapper",iconPreview:"#iconPreview",btnSave:"#btnSave"},vars:{obj_Call:null,current_icon:""},init:function(t){e.vars.obj_Call=null;e.vars.current_icon="";if(t!=undefined){e.vars.obj_Call=t;if(t.val()!=""){e.vars.current_icon=t.val()}}if(i("#g5plus-framework-popup-icon-wrapper").length==0){i.ajax({type:"POST",data:"action=popup_icon",url:g5plus_framework_meta.ajax_url,success:function(t){i("body").append(t);e.showPopup()},error:function(t){}})}else{e.showPopup()}},showPopup:function(){e.processButton();tb_show("Icons","#TB_inline?height=545&width=750&inlineId=g5plus-framework-popup-icon-wrapper",false)},processButton:function(){i("#txtSearch",e.htmlTag.wrapper).val("");i(".list-icon ul li",e.htmlTag.wrapper).show();i("#txtSearch",e.htmlTag.wrapper).keyup(function(){var t=jQuery(this).val(),r=0;i(".list-icon ul li a",e.htmlTag.wrapper).each(function(){if(i(this).attr("title").search(new RegExp(t,"i"))<0){i(this).parent().fadeOut()}else{i(this).parent().show();r++}})});i(".list-icon ul li a",e.htmlTag.wrapper).off("click").on("click",function(){e.vars.current_icon=i(this).attr("title");e.setPreview()});i(e.htmlTag.btnSave,e.htmlTag.wrapper).off("click").on("click",function(){tb_remove();if(e.vars.obj_Call!=null&&e.vars.obj_Call!=undefined){e.vars.obj_Call.val(e.vars.current_icon);e.vars.obj_Call.trigger("change")}});e.setPreview();if(e.vars.current_icon!=""){var t=i('.list-icon ul li a[title="'+e.vars.current_icon+'"]',e.htmlTag.wrapper);if(t.length>0){t.addClass("active");setTimeout(function(){i(".list-icon",e.htmlTag.wrapper).animate({scrollTop:t.position().top},1e3)},500)}}},setPreview:function(){i(".list-icon ul li a",e.htmlTag.wrapper).removeClass("active");if(e.vars.current_icon!=""){i(e.htmlTag.iconPreview+" i",e.htmlTag.wrapper).attr("class",e.vars.current_icon);i(e.htmlTag.iconPreview,e.htmlTag.wrapper).prev("span").text(e.vars.current_icon)}}};i(document).ready(function(){setTimeout(function(){i(document).on("click",".browse-icon",function(){var t=i(this).prev("input");e.init(t)});i(document).on("change",".input-icon",function(){var t=i(this).val();i(".icon-preview > i",i(this).parent()).attr("class",t)})},1e3)})})(jQuery);