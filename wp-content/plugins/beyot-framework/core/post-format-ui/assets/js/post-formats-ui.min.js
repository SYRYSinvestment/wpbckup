!function(a){"use strict";var e=e||{};e.onReady={init:function(){e.postFormats.init(),e.media.init()}},e.postFormats={init:function(){setTimeout(function(){a(".editor-post-format select").trigger("change"),a('[name="post_format"]:checked').trigger("change")},1e3),a(document).on("change",".editor-post-format select",function(t){e.postFormats.switch_post_format_content(a(this).val())}),a('[name="post_format"]').on("change",function(){e.postFormats.switch_post_format_content(a(this).val())})},switch_post_format_content:function(t){a('[id^="g5plus-pfui-post-format-"]').hide(),a("#g5plus-pfui-post-format-"+t).show()}},e.media={_frame:null,init:function(){a("#wpbody").on("click",".g5plus-pfui-gallery-button",function(t){t.preventDefault(),e.media.frame().open()}),this.event()},event:function(){var e=a(".g5plus-pfui-gallery-picker .gallery");e.on("update",function(){var t=[];a(this).find("> span").each(function(){t.push(a(this).data("id"))}),a('[name="g5plus_format_gallery_images"]').val(t.join(","))}),e.sortable({placeholder:"g5plus-pfui-ui-state-highlight",revert:200,tolerance:"pointer",stop:function(){e.trigger("update")}}),e.on("click","span.close",function(t){a(this).parent().fadeOut(200,function(){a(this).remove(),e.trigger("update")})})},frame:function(){return this._frame||(this._frame=wp.media({title:g5plus_pfui_post_format.media_title,library:{type:"image"},button:{text:g5plus_pfui_post_format.media_button},multiple:!0}),this._frame.on("open",this.updateFrame).state("library").on("select",this.select)),this._frame},select:function(){var t=this.get("selection"),i=a(".g5plus-pfui-gallery-picker .gallery");t.each(function(t){var e=t.attributes.url;void 0!==t.attributes.sizes&&void 0!==t.attributes.sizes.thumbnail&&(e=t.attributes.sizes.thumbnail.url),i.append('<span data-id="'+t.id+'" title="'+t.attributes.title+'"><img src="'+e+'" alt="" /><span class="close">x</span></span>'),i.trigger("update")})},updateFrame:function(){}},a(document).ready(e.onReady.init)}(jQuery);