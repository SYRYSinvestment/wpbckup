var APP_XMENU=APP_XMENU||{};!function(o){"use strict";APP_XMENU={timeOutHoverMenu:[],timeOutHoverOutMenu:[],initialize:function(){APP_XMENU.event()},event:function(){APP_XMENU.window_resize(),APP_XMENU.menu_event(),APP_XMENU.window_scroll(),APP_XMENU.tabs_position(5),APP_XMENU.windowLoad()},windowLoad:function(){o(window).on("load",function(){o("header.main-header .x-nav-menu").each(function(){var t=this;o("header.main-header .x-nav-menu > li").each(function(){APP_XMENU.process_menu_position(this),APP_XMENU.process_tab_padding(this,t)})})})},window_scroll:function(){o(window).on("scroll",function(t){APP_XMENU.is_desktop()&&o("header.main-header .x-nav-menu > li").each(function(){APP_XMENU.process_menu_position(this)})})},window_resize:function(){o(window).resize(function(){APP_XMENU.is_desktop()&&(APP_XMENU.tabs_position(5),o("header.main-header .x-nav-menu").each(function(){var t=this;o("header.main-header .x-nav-menu > li").each(function(){APP_XMENU.process_menu_position(this),APP_XMENU.process_tab_padding(this,t)})}))})},tabs_position:function(t){o("header.main-header ul.x-nav-menu").each(function(){o(this).hasClass("x-nav-vmenu")||(o(".x-sub-menu-tab",this).each(function(){var t=o("body").hasClass("rtl"),e=(o(this),o(this).parent().outerWidth());0==o("> li.x-menu-active",this).length&&o("> li:first-child",this).addClass("x-menu-active"),o("> li",this).each(function(){o("> ul",this).css(t?"right":"left",e+"px")}),o("> li.x-menu-active",this).each(function(){APP_XMENU.tab_position(o(this))})}),0<t&&setTimeout(function(){APP_XMENU.tabs_position(t-1)},500))})},tab_position:function(t){var e=0;0!=o("> ul",t).length&&(e=o("> ul",t).outerHeight()),t.parent().css("min-height",e+"px")},menu_event:function(){o("header.main-header .x-sub-menu-tab > li:first-child").addClass("x-menu-active"),APP_XMENU.process_menu_mobile_click(),o("header.main-header .x-nav-menu").each(function(){var t;o(this).hasClass("x-nav-vmenu")||(t=APP_XMENU.get_transition_name(this),APP_XMENU.transition_menu(this,t,this),o(".x-sub-menu-tab > li",this).hover(function(){APP_XMENU.is_desktop()&&(o("> li",o(this).parent()).removeClass("x-menu-active"),o(this).addClass("x-menu-active"),APP_XMENU.tab_position(o(this)))},function(){}))})},process_menu_mobile_click:function(){o(".header-mobile-nav li.x-menu-item, header.header-left li.x-menu-item").click(function(t){if(0!=o("> ul.x-sub-menu",this).length&&!(0<o(t.target).closest(o("> ul.x-sub-menu",this)).length)){if(0<o(t.target).closest(o("> a > span",this)).length){var e="";if(void 0!==t.target&&null!=t.target&&void 0!==t.target.baseURI&&null!=t.target.baseURI){var s=t.target.baseURI.split("#");0<s.length&&(e=s[0]);var i=o("> a.x-menu-a-text",this);if(0<i.length){var n=i.attr("href");if("#"!=n&&(void 0!==n&&null!=n&&(n=n.split("#")[0]),e!=n))return}}}t.preventDefault(),o(this).toggleClass("x-sub-menu-open"),o("> ul.x-sub-menu",this).slideToggle()}})},process_tab_padding:function(t,e){var s;APP_XMENU.is_desktop()&&(o(e).hasClass("x-nav-vmenu")||((s=o(t)).hasClass("x-item-menu-multi-column")&&0<o("> ul.x-sub-menu > li.x-tabs",s).length&&o(" > ul.x-sub-menu",s).addClass("no-padding"),o("> ul.x-sub-menu > li").each(function(){APP_XMENU.process_tab_padding(this,e)})))},transition_menu:function(t,n,a){var e=o(t);o(a).hasClass("x-nav-vmenu")||o("> li.x-menu-item",e).each(function(){var e=APP_XMENU.get_transition_name(o("> ul",this));""==e&&(e=n);var s=300;""==e&&(s=200);var i=0;o(this).hover(function(){var t;APP_XMENU.is_desktop()&&(t=o(this),i=t.prop("id"),o(".main-menu").hasClass("x-nav-vmenu")&&0<t.offset().top-jQuery(window).scrollTop()-o(window).outerHeight()/2&&o("> ul",t).removeClass("x-drop-from-bottom").addClass("x-drop-from-bottom"),void 0!==APP_XMENU.timeOutHoverMenu[t.prop("id")]&&clearTimeout(APP_XMENU.timeOutHoverMenu[t.prop("id")]),APP_XMENU.timeOutHoverMenu[t.prop("id")]=setTimeout(function(){t.addClass("x-active"),""!=e&&o("> ul",t).addClass(e)},s))},function(){var t;APP_XMENU.is_desktop()&&(t=o(this),i=0,o(".main-menu").hasClass("x-nav-vmenu")&&0<t.offset().top-jQuery(window).scrollTop()-o(window).outerHeight()/2&&o("> ul",t).removeClass("x-drop-from-bottom"),clearTimeout(APP_XMENU.timeOutHoverMenu[t.prop("id")]),APP_XMENU.timeOutHoverOutMenu[t.prop("id")]=setTimeout(function(){i!=t.prop("id")&&t.hasClass("x-active")&&(o("> ul",t).addClass(e+"-out"),setTimeout(function(){""!=e&&(o("> ul",t).removeClass(e),o("> ul",t).removeClass(e+"-out")),o(t).removeClass("x-active")},s))},200))}),o(this).hasClass("x-item-menu-multi-column")||APP_XMENU.transition_menu(o("> ul.x-sub-menu",this),n,a)})},get_transition_name:function(t){var e="";return o(t).hasClass("x-animate-slide-up")?e="x-slide-up":o(t).hasClass("x-animate-slide-down")?e="x-slide-down":o(t).hasClass("x-animate-slide-left")?e="x-slide-left":o(t).hasClass("x-animate-slide-right")?e="x-slide-right":o(t).hasClass("x-animate-fade-in")?e="x-fade-in":o(t).hasClass("x-animate-sign-flip")&&(e="x-sign-flip"),e},process_menu_position:function(t){var e=o(t);o(".x-nav-menu"),o(t).parent();e.hasClass("x-pos-left-menu-parent")?APP_XMENU.process_position_left_menu_parent(t):e.hasClass("x-pos-right-menu-parent")?APP_XMENU.process_position_right_menu_parent(t):e.hasClass("x-pos-center-menu-parent")?APP_XMENU.process_position_center_menu_parent(t):e.hasClass("x-pos-left-menu-bar")?APP_XMENU.process_position_left_menu_bar(t):e.hasClass("x-pos-right-menu-bar")?APP_XMENU.process_position_right_menu_bar(t):e.hasClass("x-pos-full")||APP_XMENU.process_position_right_menu_parent(t)},get_margin_left:function(t){var e=o(t).css("margin-left");try{e=parseInt(e.replace("px",""),10)}catch(t){e=0}return e},process_position_left_menu_parent:function(t){for(var e=o(t),s=o("header.main-header .x-nav-menu");"BODY"!=s.prop("tagName")&&"static"==s.css("position");)s=s.parent();var i,n,a=o("> ul.x-sub-menu",e);0!=a.length&&(a.css("left",""),a.css("right",""),s.outerWidth()<=a.outerWidth()?(a.css("left","0"),a.css("right","0")):(i=APP_XMENU.get_margin_left(t),n=s.outerWidth()-o(t).outerWidth()-o(t).position().left-i,o(t).outerWidth()+o(t).position().left+i<a.outerWidth()?(a.css("left","0"),a.css("right","auto")):(a.css("left","auto"),a.css("right",n+"px"))))},process_position_right_menu_parent:function(t){for(var e=o(t),s=o("header.main-header .x-nav-menu");"BODY"!=s.prop("tagName")&&"static"==s.css("position");)s=s.parent();var i,n=o("> ul.x-sub-menu",e);0!=n.length&&(n.css("left",""),n.css("right",""),i=APP_XMENU.get_margin_left(t),s.outerWidth()<=n.outerWidth()?(n.css("left","0"),n.css("right","0")):s.outerWidth()-o(t).position().left-i<n.outerWidth()?(n.css("left","auto"),n.css("right","0")):(n.css("left",o(t).position().left+i+"px"),n.css("right","auto")))},process_position_center_menu_parent:function(t){for(var e=o(t),s=o("header.main-header .x-nav-menu");"BODY"!=s.prop("tagName")&&"static"==s.css("position");)s=s.parent();var i,n,a=o("> ul.x-sub-menu",e);0!=a.length&&(a.css("left",""),a.css("right",""),s.outerWidth()<=a.outerWidth()?(a.css("left","0"),a.css("right","0")):(i=APP_XMENU.get_margin_left(t),(n=(a.outerWidth()-e.outerWidth()-i)/2)>o(t).position().left?(a.css("left","0"),a.css("right","auto")):n>s.outerWidth()-o(t).outerWidth()-o(t).position().left?(a.css("left","auto"),a.css("right","0")):(a.css("left",o(t).position().left-n+"px"),a.css("right","auto"))))},process_position_left_menu_bar:function(t){var e=o(t),s=o("> ul.x-sub-menu",e);s.css("left","0"),s.css("right","auto")},process_position_right_menu_bar:function(t){var e=o(t),s=o("> ul.x-sub-menu",e);s.css("left","auto"),s.css("right","0")},is_desktop:function(){var t=991,e=o("body");return void 0===e.attr("data-responsive")||isNaN(parseInt(e.attr("data-responsive"),10))||(t=parseInt(e.attr("data-responsive"),10)),window.matchMedia("(min-width: "+(t+1)+"px)").matches}},o(document).ready(function(){APP_XMENU.initialize()})}(jQuery);